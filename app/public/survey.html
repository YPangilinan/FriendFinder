<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type = "text/css" href = "app/public/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
</head>

<body>
  
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#"><i class="fa fa-facebook-square" aria-hidden="true"></i> FriendFinder</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="/api/friends" target = "_blank">API Friends List <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/YPangilinan/FriendFinder" target = "_blank">GitHub Repo</a>
        </li>
      </ul>
      <span class="navbar-text">
        Connecting you with the people around you
      </span>
    </div>
  </nav>
<div class="container mt-4">
       <div class="jumbotron">
           <h1>Take Our Compatibility Survey</h1>
           <p>Rate each question from 1 to 5 and we will find your perfect friend match for you!</p>
       </div>

       <div class="row mt-2 mb-2">
           <div class="col-lg-12 mt-2 mb-2">
            <h2>About You</h2>
            <hr>
            <h4>Name(Required)</h4>
             <input type="text" id = "name" class="form-control mb-2" placeholder="Username">
          
           <h4>Link to Photo Image (Required)</h4>
            <input type="text" id = "photo"class="form-control mb-2">
           <hr>
           </div>
       </div>
       <div class="row">
           <div class="col-lg-6 d-flex justify-content-center">
            <form>
                <div class="form-group">
                 <label for="surveyQuestion">
                   <div class="card text-center" style="width: 24rem; height: 8rem;">
                  <div class="card-body">
                    You prefer a plain hamburger (just meat and cheese) over a fancy one.</label>
                  </div>
                </div>
                 <select class="form-control" id="question1">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                  You believe that you need to treat yo' self every so often!</label>
                    </div>
                  </div>
                 <select class="form-control" id="question2">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                   You like Bears, Beets, and Battlestar Galactica.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question3">
                   <option value="" disabled selected>Choose your option</option>
                   <option value="1">1 (Strongly Disagree)</option>
                   <option value="2">2</option>
                   <option value="3">3</option>
                   <option value="4">4</option>
                   <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                      You wake up, flawless. Post up, flawless.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question4">
                   <option value="" disabled selected>Choose your option</option>
                   <option value="1">1 (Strongly Disagree)</option>
                   <option value="2">2</option>
                   <option value="3">3</option>
                   <option value="4">4</option>
                   <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                   When its raining, you allow someone to stand under your umbrella, ella.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question5">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
            </form>
              </div>

         <div class="col-lg-6 d-flex justify-content-center">
         <form>
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                  You make sure to grab a post-workout smoothie after a run.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question6">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                   When you make Macaroni & Cheese, you like to fold in the cheese.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question7">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                   Sbarros' is real Italian food.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question8">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                   You spend your work day pranking your co-workers.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question9">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
         
               <div class="form-group">
                 <label for="surveyQuestion">
                  <div class="card text-center" style="width: 24rem; height: 8rem;">
                    <div class="card-body">
                   You believe in helping the youth through music and karate.</label>
                    </div>
                  </div>
                 <select class="form-control" id="question10">
                     <option value="" disabled selected>Choose your option</option>
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5 (Strongly Agree)</option>
                 </select>
               </div>
             </form>
           </div>
       </div>
       <br>
        <button id = "submitButton" type="submit" class="btn btn-primary btn-lg btn-block"><i class="fa fa-check-circle-o" aria-hidden="true"></i> Submit</button>
   
    <div id = "matchModal" class = "modal fade" role = "dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class = "modal-title">Your Perfect Match!</h3>
          </div>
          <div class="modal-body">
            <h2 id = "perfectMatch"></h2>
            <img id = "matchPhoto" src = "#">
          </div>
          <div class="modal-footer">
            <button type = "button" class = "btn btn-default" data-dismiss= "modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <footer class="footer">
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/YPangilinan/FriendFinder">GitHub Repo</a></p>
    </footer>

   </div>

  <script>

    $("#submitButton").on("click", function(event){
      event.preventDefault();
  
      //validate the form
      var valid = true;
  
      if($("#name").val() === "" || $("#photo").val === ""){
        valid = false;
      } else if($("#question1").val() === "empty" || $("#question2").val() === "empty" || $("#question3").val() === "empty" || $("#question4").val() === "empty" || $("#question5").val() === "empty" || $("#question6").val() === "empty" || $("#question7").val() === "empty" || $("#question8").val() === "empty" || $("#question9").val() === "empty" || $("#question10").val() === "empty") {
        valid = false;
      }
  
      if(valid === true){
        var newMember = {
          name: $("#name").val().trim(),
          photo: $("#photo").val().trim(),
          scores:[
            $("#question1").val().trim(),
            $("#question2").val().trim(),
            $("#question3").val().trim(),
            $("#question4").val().trim(),
            $("#question5").val().trim(),
            $("#question6").val().trim(),
            $("#question7").val().trim(),
            $("#question8").val().trim(),
            $("#question9").val().trim(),
            $("#question10").val().trim()
          ]
        };
  
        var currentURL = window.location.origin;
  
        //ajax call
        $.post(currentURL + "/api/friends", newMember, function(data){
          $("#perfectMatch").text(data.name);
          $("#matchPhoto").attr("src", data.photo);
          $("#matchPhoto").css("width", "400px");
          $("#matchModal").modal("toggle");
        });
      } else{
        alert("You must fill out all questions in order to find your perfect match!")
      };
    });
  
  </script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>   
</body>
</html>

